<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <title>fight</title>
    <style>
        body{
            font-family: VT323;
        }
        button{
            cursor: 3px solid white;
        }
        canvas{
            border-radius: 8px;
            display: inline;
            position: absolute;
            top:0;
            bottom: 0;
            left: 0;
            right: 0;
            margin:auto;
            padding-bottom: 100px;
        }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
    <script src="game.js"></script>
    <script> 
        document.addEventListener("keydown", (e) => {
            if (e.code == "ArrowDown"){
                if (selector == 0){
                    selector = 1
                }
                else{
                    selector = 0
                }
            }
        })
        class Player{
            constructor(pos, health=100) {
                this.x = pos[0];
                this.y = pos[1];
                this.velx = 0
                this.vely = 0
                this.health = health
            }
        }
        var player;
        var speed;
        var nexthit = 31;
        function setup(){
            createCanvas(1024, 526);
            noCursor();
            player = new Player([30, 474]);
            enemy = new Player([800, 474]);
            speed = 1;
            keytime = 6;
            inJump = false;
            jumpart = 0;
            gvel = 0;
            jumpmax = 6;
            fslh = 20;
            lastkeys = [];
            combo = false;
            cphb = 0;
            cehb = 0;
            mvr = true;
            emvr = false;
            cepb = 0;
            cppb = 0;
            einJump = false;
            ejumpart = 0;
            playing = false;
            gameover = false;
            outtext = ""
            colors = ["#ffa1a1", "#ffd9a1", "#f6fc9f", "#a1fc9f", "#9ffcf4", "#adc7ff", "#e9aef5", "#ff5555", "	#ffb86c", "#f1fa8c", "#50fa7b", "#8be9fd", "#bd93f9", "#ff79c6", "#6272a4", "#282a36"]
            cidx = 0
            // selectarea = []
            selector = 0
        }
        function preload(){
            img = loadImage('assets/sword.png');
            imgl = loadImage('assets/swordleft.png')
            bg = loadImage("assets/streetfighter.gif")
            bgb = loadImage("assets/gamepreview.jpg")
            playerImg = loadImage("assets/player.png")
            
        }
        function cc(){
            fill(colors[cidx])
            cidx += 1
            if (cidx + 1 > colors.length){
                cidx = 0
            }
            if (!playing){
                setTimeout(cc, 500);
            }
        }
        setTimeout(cc, 1300);
        function draw(){
            textFont("VT323")
            frameRate(60);
            if (playing){
                drawc();
            }
            // else if (gameover){
            //     background(220);
            //     textSize(70);
            //     if (outtext == "You win!"){ //cause text-align: center is ðŸ¤®
            //         text(outtext, 360, 100);
            //     }
            //     else{
            //         text(outtext, 300, 100)
            //     }
            //     push();
            //     rect(mouseX, mouseY, 7)
            //     pop();
            // }
            else{
                background(220);
                image(bgb, 0, 0, 1026, 526);
                rect(mouseX, mouseY, 3)
                textSize(70);
                h = text("Battle of the Greatest", 220, 100);
                
                noStroke();
                // rect(375, 220, 240, 70);
                push();
                fill("white")
                textSize(30)
                text("Play with a Friend", 390, 250)
                text("Play with AI", 421, 310);
                // console.log("r")
                if (selector == 0){
                    text("â†’", 350, 250)
                }
                else{
                    text("â†’", 350, 310)
                }
                if (keyIsDown(13)){
                    if (selector == 0){
                        playing = true;
                        twoplayer = true;
                    }
                    else{
                        playing = true;
                        twoplayer = false
                    }
                }
                textSize(13)
                text("Blue Player - WASD to Move, E to attack\nRed Player - Arrow Keys, Shift to Attack", 370, 500);
                pop();
            }
        }
    </script>
</body>
</html>